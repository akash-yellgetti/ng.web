"use strict";(self.webpackChunkngweb=self.webpackChunkngweb||[]).push([[355],{3355:(Re,B,l)=>{l.r(B),l.d(B,{UserModule:()=>Ve});var Z=l(9808),b=l(2131),C=l(8210),v=l(7489),e=l(5e3),w=l(2349),N=l(4506),q=l(5374),_=l(520),x=l(4850),U=l(7221),S=l(7261);let M=(()=>{class i{constructor(t,n,s){this._snackBar=t,this.http=n,this.storage=s,this.getConversation=()=>{const a=C.G.uri+"/conversation/list",g={headers:new _.WM({"Content-Type":"application/json",Authorization:this.getAuthToken()})};return this.http.get(a,g).pipe((0,x.U)(d=>d),(0,U.K)(this.handleError))},this.getConversationHistory=a=>{const u=C.G.uri+"/conversation/history",d={headers:new _.WM({"Content-Type":"application/json",Authorization:this.getAuthToken()})},c=JSON.stringify({id:a});return this.http.post(u,c,d).pipe((0,x.U)(p=>p),(0,U.K)(this.handleError))},this.postConversationMessage=a=>{const u=C.G.uri+"/conversation/message/create";console.log(a);const d={headers:new _.WM({"Content-Type":"application/json",Authorization:this.getAuthToken()})},c=JSON.stringify(a);return this.http.post(u,c,d).pipe((0,x.U)(p=>p),(0,U.K)(this.handleError))},this.getAuthToken=()=>`JWT ${this.storage.retrieve("tokens").accessToken}`,this.handleError=a=>{const u=a.error;switch(a.status){case 401:default:this._snackBar.open(u.message,void 0,{duration:5e3});break;case 400:case 422:const g=u.data;for(let d in g)this._snackBar.open(g[d].message,void 0,{duration:5e3})}}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(S.ux),e.LFG(_.eN),e.LFG(q.n2))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var P=l(4808),G=l(2260);let j=(()=>{class i extends G.v{constructor(t,n,s){super(t,n,s),this._snackBar=t,this.http=n,this.storage=s,this.getContacts=()=>{const a=C.G.uri+"/contact/list",g={headers:new _.WM({"Content-Type":"application/json",Authorization:this.getAuthToken()})};return this.http.get(a,g).pipe((0,x.U)(d=>d),(0,U.K)(this.handleError))},this.refreshContacts=()=>{const a=C.G.uri+"/contact/refresh",g={headers:new _.WM({"Content-Type":"application/json",Authorization:this.getAuthToken()})};return this.http.get(a,g).pipe((0,x.U)(d=>d),(0,U.K)(this.handleError))},this.addContact=a=>{const u=C.G.uri+"/contact/create",d={headers:new _.WM({"Content-Type":"application/json",Authorization:this.getAuthToken()})},c=JSON.stringify(a);return this.http.post(u,c,d).pipe((0,x.U)(p=>p),(0,U.K)(this.handleError))}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(S.ux),e.LFG(_.eN),e.LFG(q.n2))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var z=l(2290),D=l(7423),k=l(2181),V=l(5245),y=l(9224),J=l(7322),Q=l(7531),f=l(3075),R=l(3322);const K=["dialogRef"];function $(i,o){if(1&i&&e._UZ(0,"img",21),2&i){const t=e.oxw();e.Q6J("src",t.profileImg,e.LSH)}}function X(i,o){if(1&i&&(e.TgZ(0,"p",8),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.user.shortName," ")}}const E=function(i,o){return{online:i,away:o}};function ee(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",4)(2,"p",8),e._uU(3,"CV"),e.qZA()(),e.TgZ(4,"div",7)(5,"p",25),e.NdJ("click",function(){const a=e.CHM(t).$implicit,u=e.oxw(2);return e.KtG(u.redirectToChatWindow(a))}),e._uU(6),e._UZ(7,"span",26),e.qZA(),e.TgZ(8,"p",27),e._uU(9,"Lorem, ipsum dolor sit"),e.qZA()(),e.TgZ(10,"div",28),e._uU(11,"9.31 am"),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(6),e.hij(" ",t.fullName," "),e.xp6(1),e.Q6J("ngClass",e.WLB(2,E,t&&!0===t.isOnline,t&&!t.isOnline))}}function te(i,o){if(1&i&&(e.TgZ(0,"div",22),e.YNc(1,ee,12,5,"div",23),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.conversations)}}function ie(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",4)(2,"p",8),e._uU(3,"CV"),e.qZA()(),e.TgZ(4,"div",7)(5,"p",25),e.NdJ("click",function(){const a=e.CHM(t).$implicit,u=e.oxw(2);return e.KtG(u.redirectToChatWindow(a))}),e._uU(6),e._UZ(7,"span",26),e.qZA(),e.TgZ(8,"p",27),e._uU(9,"Lorem, ipsum dolor sit"),e.qZA()(),e.TgZ(10,"div",28),e._uU(11,"9.31 am"),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(6),e.hij(" ",t.fullName," "),e.xp6(1),e.Q6J("ngClass",e.WLB(2,E,t&&!0===t.isOnline,t&&!t.isOnline))}}function ne(i,o){if(1&i&&(e.TgZ(0,"div",22),e.YNc(1,ie,12,5,"div",23),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.contacts)}}const oe=function(i,o){return{"receive-msg":i,"send-msg":o}};function ae(i,o){if(1&i&&(e.TgZ(0,"div",38)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"div",39)(4,"span",28),e._uU(5,"9.30 am"),e.qZA(),e.TgZ(6,"span",40),e._UZ(7,"i",41),e.qZA()()()),2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("ngClass",e.WLB(2,oe,t.userId!==n.user._id,t.userId===n.user._id)),e.xp6(2),e.Oqu(t.message)}}function se(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",29)(1,"mat-card",30)(2,"div",31),e._UZ(3,"div",4),e.TgZ(4,"div",7)(5,"p",8),e._uU(6),e.qZA()()(),e.TgZ(7,"div",32),e.YNc(8,ae,8,5,"div",33),e.qZA(),e.TgZ(9,"div",34)(10,"textarea",35),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.message=s)}),e.qZA(),e.TgZ(11,"button",36)(12,"i",37),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.send())}),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(6),e.hij(" ",t.currentConversationData.fullName," "),e.xp6(2),e.Q6J("ngForOf",t.currentConversationData.messages),e.xp6(2),e.Q6J("ngModel",t.message)}}function re(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"h2",42),e._uU(1,"Add Contact"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._UZ(3,"p"),e.TgZ(4,"mat-form-field")(5,"mat-label"),e._uU(6,"First Name"),e.qZA(),e.TgZ(7,"input",43),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.contact.firstName.value=s)}),e.qZA()(),e.TgZ(8,"mat-form-field")(9,"mat-label"),e._uU(10,"Mobile Number"),e.qZA(),e.TgZ(11,"input",43),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.contact.mobileNo.value=s)}),e.qZA()()(),e.TgZ(12,"mat-dialog-actions")(13,"button",44),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.cancel())}),e._uU(14,"Cancel"),e.qZA(),e.TgZ(15,"button",44),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.addContact())}),e._uU(16,"Save"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(7),e.Q6J("ngModel",t.contact.firstName.value),e.xp6(4),e.Q6J("ngModel",t.contact.mobileNo.value)}}let ce=(()=>{class i{constructor(t,n,s,a,u,g,d,c,p){this.dialog=t,this.moduleService=n,this.activatedRoute=s,this.route=a,this.localStorageService=u,this.conversationService=g,this.socketService=d,this.contactService=c,this.toastr=p,this.user=null,this.conversations=[],this.contacts=[],this.params=null,this.message="",this.view="chat",this.currentConversationData=null,this.conversationHistory=[],this.contact={firstName:{value:""},mobileNo:{value:""}},this.setProfileImage=()=>{this.user=this.localStorageService.retrieve("user"),this.user&&this.user.profilePicture&&(this.profileImg=C.G.uri+"/"+this.user.profilePicture)},this.redirectToChatWindow=r=>{this.currentConversationData=r,this.view="chat"},this.send=()=>{const r={eventName:"chat.message",eventTo:this.currentConversationData._id,type:this.currentConversationData.type,userId:this.user._id,conversationId:this.currentConversationData._id,data:{type:"text",message:v.cloneDeep(this.message)}};this.conversationService.postConversationMessage(r).subscribe(),this.socketService.postChatMessageSend(r),this.message=""},this.addContact=()=>{console.log(this.contact),this.contactService.addContact({firstName:this.contact.firstName.value,mobileNo:this.contact.mobileNo.value}).subscribe(r=>{this.toastr.success(r.message),this.dialog.closeAll()})},this.newChat=()=>{this.contactService.getContacts().subscribe(r=>{console.log(r),r&&r.status&&(this.contacts=v.map(r.data,m=>(m.fullName=m.firstName+" "+v.get(m,"lastName",""),m.type="individual",m)),this.view="new-chat")})},this.refreshContacts=()=>{this.contactService.refreshContacts().subscribe(r=>{console.log(r)})},this.cancel=()=>{this.dialog.closeAll()};const h=this.localStorageService.retrieve("user");this.localStorageService.retrieve("onlineUsers"),this.conversations=v.map(this.activatedRoute.snapshot.data.conversations.data,r=>{if(r&&r.type&&"individual"===r.type){const m=v.find(r.members,T=>T.userId!==h._id);r.user=m.user,r.fullName=m.user.firstName+" "+m.user.lastName,this.socketService.socket.emit("getUserStatus",{userId:m.user._id})}else r&&r.type&&"group"===r.type&&(r.fullName=r.name);return r}),this.socketService.join({channels:v.values(v.mapValues(this.conversations,"_id"))}),this.socketService.getChatMessageReceive().subscribe(r=>{v.find(this.conversations,{_id:r.conversationId}).messages.push({conversationId:r.conversationId,userId:r.userId,type:r.data.type,message:r.data.message})}),this.moduleService.mainTitle.next("Chat"),this.socketService.userStatusChange().subscribe(r=>{const m=v.find(this.conversations,F=>F.user._id==r.userId);v.set(m,"isOnline",r.online),v.find(this.contacts,F=>F.user._id==r.userId),v.set(m,"isOnline",r.online),console.log(this.conversations)})}ngOnInit(){this.setProfileImage()}addContactDialog(){this.dialog.open(this.dialogRef,{data:{}}).afterClosed().subscribe(n=>{console.log("The dialog was closed")})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w.uw),e.Y36(N.C),e.Y36(b.gz),e.Y36(b.F0),e.Y36(q.n2),e.Y36(M),e.Y36(P.$),e.Y36(j),e.Y36(z._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-chat"]],viewQuery:function(t,n){if(1&t&&e.Gf(K,5),2&t){let s;e.iGM(s=e.CRH())&&(n.dialogRef=s.first)}},decls:40,vars:7,consts:[[1,"container-fluid","d-flex","d-gap-15","chart-wrapper"],[1,"w-30","chat-list-wrapper","d-flex","d-wrap","d-gap-15"],[1,"chat-list","padding-zero"],[1,"list-header","d-flex"],[1,"user-img","d-flex","align-items","align-center"],["alt","profile image","class","profile-img",3,"src",4,"ngIf"],["class","profile__initals ani",4,"ngIf"],[1,"user-details"],[1,"profile__initals","ani"],["mat-icon-button","",3,"click"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item",""],[1,"search-user"],[1,"fa-solid","fa-magnifying-glass"],["type","text","value","","placeholder","Search or start new chat"],["class","message-list",4,"ngIf"],[1,"w-70","chat-message-wrapper","d-flex","d-wrap"],["class","chart-wrapper width-100",4,"ngIf"],["dialogRef",""],["alt","profile image",1,"profile-img",3,"src"],[1,"message-list"],["class","user-detail d-flex",4,"ngFor","ngForOf"],[1,"user-detail","d-flex"],[1,"profile__initals","ani",3,"click"],[1,"status-circle",3,"ngClass"],[1,"desc"],[1,"time"],[1,"chart-wrapper","width-100"],[1,"chat-window","padding-zero"],[1,"list-header","d-flex","align-items"],[1,"chat-messages","d-flex"],["class","chat-popup",3,"ngClass",4,"ngFor","ngForOf"],[1,"send-input","d-flex"],["cols","3","placeholder","Type a message",3,"ngModel","ngModelChange"],[1,"common-btn","btn-text"],[1,"fa-regular","fa-paper-plane",3,"click"],[1,"chat-popup",3,"ngClass"],[1,"d-flex","time-wrapper","w-100"],[1,"tick"],[1,"fa-solid","fa-check-double"],["mat-dialog-title",""],["matInput","",3,"ngModel","ngModelChange"],["mat-button","",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"div",3)(4,"div",4),e.YNc(5,$,1,1,"img",5),e.YNc(6,X,2,1,"p",6),e.qZA(),e.TgZ(7,"div",7)(8,"p",8),e._uU(9),e.qZA(),e.TgZ(10,"button",9),e.NdJ("click",function(){return n.newChat()}),e.TgZ(11,"mat-icon"),e._uU(12,"add_circle"),e.qZA()(),e.TgZ(13,"button",9),e.NdJ("click",function(){return n.refreshContacts()}),e.TgZ(14,"mat-icon"),e._uU(15,"refresh"),e.qZA()(),e.TgZ(16,"button",10)(17,"mat-icon"),e._uU(18,"more_vert"),e.qZA()(),e.TgZ(19,"mat-menu",null,11)(21,"button",12),e.NdJ("click",function(){return n.addContactDialog()}),e.TgZ(22,"mat-icon"),e._uU(23,"add_circle"),e.qZA(),e.TgZ(24,"span"),e._uU(25,"New Contact"),e.qZA()(),e.TgZ(26,"button",13)(27,"mat-icon"),e._uU(28,"add_circle"),e.qZA(),e.TgZ(29,"span"),e._uU(30,"New Group"),e.qZA()()()()(),e.TgZ(31,"div",14),e._UZ(32,"i",15)(33,"input",16),e.qZA(),e.YNc(34,te,2,1,"div",17),e.YNc(35,ne,2,1,"div",17),e.qZA()(),e.TgZ(36,"div",18),e.YNc(37,se,13,3,"div",19),e.qZA()(),e.YNc(38,re,17,2,"ng-template",null,20,e.W1O)),2&t){const s=e.MAs(20);e.xp6(5),e.Q6J("ngIf",n.profileImg),e.xp6(1),e.Q6J("ngIf",!n.profileImg),e.xp6(3),e.Oqu(n.user.fullName),e.xp6(7),e.Q6J("matMenuTriggerFor",s),e.xp6(18),e.Q6J("ngIf","chat"===n.view),e.xp6(1),e.Q6J("ngIf","new-chat"===n.view),e.xp6(2),e.Q6J("ngIf",n.currentConversationData)}},dependencies:[Z.mk,Z.sg,Z.O5,D.lW,k.VK,k.OP,k.p6,V.Hw,y.a8,J.KE,J.hX,Q.Nt,f.Fj,f.JJ,f.On,w.uh,w.xY,w.H8,R.oO]}),i})();var le=l(4107),ue=l(508),H=l(9966),I=l(4668);function de(i,o){if(1&i&&(e.TgZ(0,"div",24)(1,"mat-card",25)(2,"mat-card-header")(3,"div",26)(4,"div",27),e._uU(5,"CV"),e.qZA(),e.TgZ(6,"div",28)(7,"h2"),e._uU(8,"Chirag Vartak"),e.qZA(),e.TgZ(9,"p",29),e._uU(10,"Father"),e.qZA()()(),e.TgZ(11,"div",30)(12,"mat-icon",31),e._uU(13,"done"),e.qZA(),e.TgZ(14,"button",32)(15,"mat-icon"),e._uU(16,"more_vert"),e.qZA()(),e.TgZ(17,"mat-menu",null,33)(19,"button",34)(20,"span"),e._uU(21,"Redial"),e.qZA()(),e.TgZ(22,"button",34)(23,"span"),e._uU(24,"Check voice mail"),e.qZA()(),e.TgZ(25,"button",34)(26,"span"),e._uU(27,"Disable alerts"),e.qZA()()()()(),e.TgZ(28,"mat-card-content",35)(29,"div",36)(30,"div",37)(31,"mat-icon",38),e._uU(32,"man"),e.qZA(),e._uU(33," Female "),e.qZA(),e.TgZ(34,"div",37)(35,"mat-icon",38),e._uU(36,"cake"),e.qZA(),e._uU(37," 01-05-1955 "),e.qZA(),e.TgZ(38,"div",37)(39,"mat-icon",38),e._uU(40,"call"),e.qZA(),e._uU(41," 9930687598 "),e.qZA()(),e.TgZ(42,"div",39)(43,"button",40),e._uU(44,"Edit"),e.qZA(),e.TgZ(45,"button",21),e._uU(46,"Delete"),e.qZA()()()(),e.TgZ(47,"mat-card",25)(48,"mat-card-header")(49,"div",41)(50,"div",27),e._uU(51,"CV"),e.qZA(),e.TgZ(52,"div",28)(53,"h2"),e._uU(54,"Chirag Vartak"),e.qZA(),e.TgZ(55,"p",29),e._uU(56,"Father"),e.qZA()()(),e.TgZ(57,"div",42)(58,"mat-icon",31),e._uU(59,"done"),e.qZA(),e.TgZ(60,"button",32)(61,"mat-icon"),e._uU(62,"more_vert"),e.qZA()(),e.TgZ(63,"mat-menu",null,33)(65,"button",34)(66,"span"),e._uU(67,"Redial"),e.qZA()(),e.TgZ(68,"button",34)(69,"span"),e._uU(70,"Check voice mail"),e.qZA()(),e.TgZ(71,"button",34)(72,"span"),e._uU(73,"Disable alerts"),e.qZA()()()()(),e.TgZ(74,"mat-card-content",35)(75,"div",36)(76,"div",37)(77,"mat-icon",38),e._uU(78,"man"),e.qZA(),e._uU(79," Female "),e.qZA(),e.TgZ(80,"div",37)(81,"mat-icon",38),e._uU(82,"cake"),e.qZA(),e._uU(83," 01-05-1955 "),e.qZA(),e.TgZ(84,"div",37)(85,"mat-icon",38),e._uU(86,"call"),e.qZA(),e._uU(87," 9930687598 "),e.qZA()(),e.TgZ(88,"div",39)(89,"button",40),e._uU(90,"Edit"),e.qZA(),e.TgZ(91,"button",21),e._uU(92,"Delete"),e.qZA()()()(),e.TgZ(93,"mat-card",25)(94,"mat-card-header")(95,"div",41)(96,"div",27),e._uU(97,"CV"),e.qZA(),e.TgZ(98,"div",28)(99,"h2"),e._uU(100,"Chirag Vartak"),e.qZA(),e.TgZ(101,"p",29),e._uU(102,"Father"),e.qZA()()(),e.TgZ(103,"div",42)(104,"mat-icon",31),e._uU(105,"done"),e.qZA(),e.TgZ(106,"button",32)(107,"mat-icon"),e._uU(108,"more_vert"),e.qZA()(),e.TgZ(109,"mat-menu",null,33)(111,"button",34)(112,"span"),e._uU(113,"Redial"),e.qZA()(),e.TgZ(114,"button",34)(115,"span"),e._uU(116,"Check voice mail"),e.qZA()(),e.TgZ(117,"button",34)(118,"span"),e._uU(119,"Disable alerts"),e.qZA()()()()(),e.TgZ(120,"mat-card-content",35)(121,"div",36)(122,"div",37)(123,"mat-icon",38),e._uU(124,"man"),e.qZA(),e._uU(125," Female "),e.qZA(),e.TgZ(126,"div",37)(127,"mat-icon",38),e._uU(128,"cake"),e.qZA(),e._uU(129," 01-05-1955 "),e.qZA(),e.TgZ(130,"div",37)(131,"mat-icon",38),e._uU(132,"call"),e.qZA(),e._uU(133," 9930687598 "),e.qZA()(),e.TgZ(134,"div",39)(135,"button",40),e._uU(136,"Edit"),e.qZA(),e.TgZ(137,"button",21),e._uU(138,"Delete"),e.qZA()()()(),e.TgZ(139,"mat-card",25)(140,"mat-card-header")(141,"div",26)(142,"div",27),e._uU(143,"CV"),e.qZA(),e.TgZ(144,"div",28)(145,"h2"),e._uU(146,"Chirag Vartak"),e.qZA(),e.TgZ(147,"p",29),e._uU(148,"Father"),e.qZA()()(),e.TgZ(149,"div",30)(150,"mat-icon",31),e._uU(151,"done"),e.qZA(),e.TgZ(152,"button",32)(153,"mat-icon"),e._uU(154,"more_vert"),e.qZA()(),e.TgZ(155,"mat-menu",null,33)(157,"button",34)(158,"span"),e._uU(159,"Redial"),e.qZA()(),e.TgZ(160,"button",34)(161,"span"),e._uU(162,"Check voice mail"),e.qZA()(),e.TgZ(163,"button",34)(164,"span"),e._uU(165,"Disable alerts"),e.qZA()()()()(),e.TgZ(166,"mat-card-content",35)(167,"div",36)(168,"div",37)(169,"mat-icon",38),e._uU(170,"man"),e.qZA(),e._uU(171," Female "),e.qZA(),e.TgZ(172,"div",37)(173,"mat-icon",38),e._uU(174,"cake"),e.qZA(),e._uU(175," 01-05-1955 "),e.qZA(),e.TgZ(176,"div",37)(177,"mat-icon",38),e._uU(178,"call"),e.qZA(),e._uU(179," 9930687598 "),e.qZA()(),e.TgZ(180,"div",39)(181,"button",40),e._uU(182,"Edit"),e.qZA(),e.TgZ(183,"button",21),e._uU(184,"Delete"),e.qZA()()()(),e.TgZ(185,"mat-card",25)(186,"mat-card-header")(187,"div",26)(188,"div",27),e._uU(189,"CV"),e.qZA(),e.TgZ(190,"div",28)(191,"h2"),e._uU(192,"Chirag Vartak"),e.qZA(),e.TgZ(193,"p",29),e._uU(194,"Father"),e.qZA()()(),e.TgZ(195,"div",30)(196,"mat-icon",31),e._uU(197,"done"),e.qZA(),e.TgZ(198,"button",32)(199,"mat-icon"),e._uU(200,"more_vert"),e.qZA()(),e.TgZ(201,"mat-menu",null,33)(203,"button",34)(204,"span"),e._uU(205,"Redial"),e.qZA()(),e.TgZ(206,"button",34)(207,"span"),e._uU(208,"Check voice mail"),e.qZA()(),e.TgZ(209,"button",34)(210,"span"),e._uU(211,"Disable alerts"),e.qZA()()()()(),e.TgZ(212,"mat-card-content",35)(213,"div",36)(214,"div",37)(215,"mat-icon",38),e._uU(216,"man"),e.qZA(),e._uU(217," Female "),e.qZA(),e.TgZ(218,"div",37)(219,"mat-icon",38),e._uU(220,"cake"),e.qZA(),e._uU(221," 01-05-1955 "),e.qZA(),e.TgZ(222,"div",37)(223,"mat-icon",38),e._uU(224,"call"),e.qZA(),e._uU(225," 9930687598 "),e.qZA()(),e.TgZ(226,"div",39)(227,"button",40),e._uU(228,"Edit"),e.qZA(),e.TgZ(229,"button",21),e._uU(230,"Delete"),e.qZA()()()(),e.TgZ(231,"mat-card",25)(232,"mat-card-header")(233,"div",26)(234,"div",27),e._uU(235,"CV"),e.qZA(),e.TgZ(236,"div",28)(237,"h2"),e._uU(238,"Chirag Vartak"),e.qZA(),e.TgZ(239,"p",29),e._uU(240,"Father"),e.qZA()()(),e.TgZ(241,"div",30)(242,"mat-icon",31),e._uU(243,"done"),e.qZA(),e.TgZ(244,"button",32)(245,"mat-icon"),e._uU(246,"more_vert"),e.qZA()(),e.TgZ(247,"mat-menu",null,33)(249,"button",34)(250,"span"),e._uU(251,"Redial"),e.qZA()(),e.TgZ(252,"button",34)(253,"span"),e._uU(254,"Check voice mail"),e.qZA()(),e.TgZ(255,"button",34)(256,"span"),e._uU(257,"Disable alerts"),e.qZA()()()()(),e.TgZ(258,"mat-card-content",35)(259,"div",36)(260,"div",37)(261,"mat-icon",38),e._uU(262,"man"),e.qZA(),e._uU(263," Female "),e.qZA(),e.TgZ(264,"div",37)(265,"mat-icon",38),e._uU(266,"cake"),e.qZA(),e._uU(267," 01-05-1955 "),e.qZA(),e.TgZ(268,"div",37)(269,"mat-icon",38),e._uU(270,"call"),e.qZA(),e._uU(271," 9930687598 "),e.qZA()(),e.TgZ(272,"div",39)(273,"button",40),e._uU(274,"Edit"),e.qZA(),e.TgZ(275,"button",21),e._uU(276,"Delete"),e.qZA()()()()()),2&i){const t=e.MAs(18);e.xp6(14),e.Q6J("matMenuTriggerFor",t),e.xp6(46),e.Q6J("matMenuTriggerFor",t),e.xp6(46),e.Q6J("matMenuTriggerFor",t),e.xp6(46),e.Q6J("matMenuTriggerFor",t),e.xp6(46),e.Q6J("matMenuTriggerFor",t),e.xp6(46),e.Q6J("matMenuTriggerFor",t)}}function me(i,o){if(1&i&&e._uU(0),2&i){const t=e.oxw().$implicit;e.hij(" ",t.title," ")}}function ge(i,o){if(1&i&&(e.TgZ(0,"span",53),e._uU(1),e.qZA()),2&i){const t=e.oxw().row,n=e.oxw().$implicit;e.xp6(1),e.Oqu(t[n.name])}}function pe(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().row,n=e.oxw().$implicit;e.xp6(1),e.Oqu(t[n.name])}}function he(i,o){if(1&i&&(e.TgZ(0,"span",54)(1,"button",55),e._UZ(2,"i",56),e.qZA(),e.TgZ(3,"button",55),e._UZ(4,"i",57),e.qZA(),e.TgZ(5,"button",58),e._UZ(6,"i",59),e.qZA(),e.TgZ(7,"button",60)(8,"mat-icon"),e._uU(9,"more_vert"),e.qZA()(),e.TgZ(10,"mat-menu",null,33)(12,"button",34)(13,"span"),e._uU(14,"Redial"),e.qZA()(),e.TgZ(15,"button",34)(16,"span"),e._uU(17,"Check voice mail"),e.qZA()(),e.TgZ(18,"button",34)(19,"span"),e._uU(20,"Disable alerts"),e.qZA()()()()),2&i){const t=e.MAs(11);e.xp6(7),e.Q6J("matMenuTriggerFor",t)}}function fe(i,o){if(1&i&&(e.YNc(0,ge,2,1,"span",50),e.YNc(1,pe,2,1,"span",51),e.YNc(2,he,21,1,"span",52)),2&i){const t=e.oxw().$implicit;e.Q6J("ngIf","user_img"===t.name),e.xp6(1),e.Q6J("ngIf","actions"!==t.name&&"user_img"!==t.name),e.xp6(1),e.Q6J("ngIf","actions"===t.name)}}function ve(i,o){if(1&i&&(e.TgZ(0,"ngx-datatable-column",47),e.YNc(1,me,1,1,"ng-template",48),e.YNc(2,fe,3,3,"ng-template",49),e.qZA()),2&i){const t=o.$implicit;e.s9C("name",t.name),e.s9C("prop",t.prop)}}const _e=function(i){return{itemsPerPage:3,currentPage:i}};function Ze(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",43)(1,"ngx-datatable",44),e.ALo(2,"paginate"),e.YNc(3,ve,3,2,"ngx-datatable-column",45),e.qZA(),e.TgZ(4,"pagination-controls",46),e.NdJ("pageChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.page=s)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("rows",e.xi3(2,8,t.familyList,e.VKq(11,_e,t.page)))("columns",t.columns)("headerHeight",50)("footerHeight",50)("columnMode","force")("swapColumns",!1)("reorderable",!1),e.xp6(2),e.Q6J("ngForOf",t.columns)}}let Ce=(()=>{class i{constructor(t,n){this.router=t,this.moduleService=n,this.maxSize=7,this.page=1,this.config={id:"custom",itemsPerPage:3,currentPage:1},this.tabs=[{code:"profile",name:"Profile",link:"/main/user/profile"},{code:"family",name:"Family",link:"/main/user/family"},{code:"vehicle",name:"Vehicle",link:"/main/user/vehicle"},{code:"visitor",name:"Visitor",link:"/main/user/visitor"},{code:"vendor",name:"Vendor",link:"/main/user/vendor"},{code:"payment",name:"Payment",link:"/main/user/payment"}],this.showGrid=!1,this.sortBy="sort",this.columns=[{title:"",name:"user_img"},{title:"Name",name:"username"},{title:"Date of birth",name:"dob"},{title:"Gender",name:"gender"},{title:"Telephone",name:"telephone"},{title:"Actions",name:"actions"}],this.familyList=[{user_img:"cv",username:"Chirag Vartak",dob:"26-09-1991",gender:"Male",telephone:"7276453683",actions:""},{user_img:"ay",username:"Chirag Vartak",dob:"26-09-1991",gender:"Male",telephone:"7276453684",actions:""},{user_img:"cv",username:"Chirag Vartak",dob:"26-09-1991",gender:"Male",telephone:"7276453685",actions:""},{user_img:"cv",username:"Chirag Vartak",dob:"26-09-1991",gender:"Male",telephone:"7276453683",actions:""},{user_img:"ay",username:"Chirag Vartak",dob:"26-09-1991",gender:"Male",telephone:"7276453684",actions:""},{user_img:"cv",username:"Chirag Vartak",dob:"26-09-1991",gender:"Male",telephone:"7276453685",actions:""},{user_img:"cv",username:"Chirag Vartak",dob:"26-09-1991",gender:"Male",telephone:"7276453683",actions:""},{user_img:"ay",username:"Chirag Vartak",dob:"26-09-1991",gender:"Male",telephone:"7276453684",actions:""},{user_img:"cv",username:"Chirag Vartak",dob:"26-09-1991",gender:"Male",telephone:"7276453685",actions:""},{user_img:"cv",username:"Chirag Vartak",dob:"26-09-1991",gender:"Male",telephone:"7276453683",actions:""},{user_img:"ay",username:"Chirag Vartak",dob:"26-09-1991",gender:"Male",telephone:"7276453684",actions:""},{user_img:"cv",username:"Chirag Vartak",dob:"26-09-1991",gender:"Male",telephone:"7276453685",actions:""},{user_img:"cv",username:"Chirag Vartak",dob:"26-09-1991",gender:"Male",telephone:"7276453683",actions:""},{user_img:"ay",username:"Chirag Vartak",dob:"26-09-1991",gender:"Male",telephone:"7276453684",actions:""},{user_img:"cv",username:"Chirag Vartak",dob:"26-09-1991",gender:"Male",telephone:"7276453685",actions:""},{user_img:"cv",username:"Chirag Vartak",dob:"26-09-1991",gender:"Male",telephone:"7276453683",actions:""},{user_img:"ay",username:"Chirag Vartak",dob:"26-09-1991",gender:"Male",telephone:"7276453684",actions:""},{user_img:"cv",username:"Chirag Vartak",dob:"26-09-1991",gender:"Male",telephone:"7276453685",actions:""}],this.redirect=s=>{const a={state:{refresh:(new Date).getTime()}};this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate([s.link],a))},this.moduleService.mainTitle.next("Profile")}ngOnInit(){}onPageChange(t){this.config.currentPage=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b.F0),e.Y36(N.C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-family"]],decls:39,vars:7,consts:[[1,"user-main"],[1,"contain","cover"],["src","https://images.pexels.com/photos/268941/pexels-photo-268941.jpeg?fit=crop&h=1000&mark=https%3A%2F%2Fassets.imgix.net%2F~text%3Fbg%3D80000000%26txt%3DFree%2BStock%2BPhotos%26txtalign%3Dcenter%26txtclr%3Dfff%26txtfont%3DAvenir-Heavy%26txtpad%3D20%26txtsize%3D120%26w%3D1300&markalign=center%2Cmiddle&txt=pexels.com&txtalign=center&txtclr=eeffffff&txtfont=Avenir-Heavy&txtshad=10&txtsize=60&w=1500"],["type","button",1,"btn","btn-light","btn-sm","btn-edit"],[1,"bi","bi-pencil-square"],[1,"main-content"],[1,"fliter-wrapper"],[1,"filters"],[1,"form-group","d-flex","grid-select"],[1,"common-btn","btn-text",3,"click"],[1,"fa-solid","fa-bars"],[1,"fa-solid","fa-table-cells-large"],[1,"form-group"],[1,"search-input"],["matNativeControl","","type","search","placeholder","Search",1,"input-field"],["matSuffix","",1,"input-icon"],["matNativeControl","",1,"input-field",3,"ngModel","ngModelChange"],["value","sort"],["value","date"],["value","price"],[1,"form-group","button"],[1,"common-btn","btn-fill"],["class","vehical-list d-flex",4,"ngIf"],["class","family-list",4,"ngIf"],[1,"vehical-list","d-flex"],[1,"vehical-card"],[1,"profile-details","d-flex","align-center"],[1,"user-avatar"],[1,"name-details"],[1,"sub-title"],[1,"action-details","d-flex","align-center"],[1,"done"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item",""],[1,"d-flex","card-content"],[1,"profile-list"],[1,"list","d-flex","align-items"],[1,"list-icon"],[1,"profile-actions"],[1,"common-btn","btn-outline"],[1,"profile-details","d-flex"],[1,"action-details","d-flex"],[1,"family-list"],["rowHeight","auto",1,"material",3,"rows","columns","headerHeight","footerHeight","columnMode","swapColumns","reorderable"],[3,"name","prop",4,"ngFor","ngForOf"],[3,"pageChange"],[3,"name","prop"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["class","user-circle d-flex align-center align-items",4,"ngIf"],[4,"ngIf"],["class","d-flex",4,"ngIf"],[1,"user-circle","d-flex","align-center","align-items"],[1,"d-flex"],[1,"common-btn","btn-text"],[1,"fa-solid","fa-circle-check"],[1,"fa-solid","fa-pen-to-square"],[1,"common-btn","btn-text","delete-btn"],[1,"fa-solid","fa-trash-can"],["mat-icon-button","",1,"menu-btn",3,"matMenuTriggerFor"]],template:function(t,n){1&t&&(e.TgZ(0,"section",0)(1,"div",1),e._UZ(2,"img",2),e.TgZ(3,"button",3),e._UZ(4,"i",4),e._uU(5," Edit"),e.qZA()()(),e.TgZ(6,"section")(7,"div",5)(8,"div",6)(9,"h1"),e._uU(10,"Family"),e.qZA(),e.TgZ(11,"div",7)(12,"div",8)(13,"button",9),e.NdJ("click",function(){return n.showGrid=!1}),e._UZ(14,"i",10),e.qZA(),e.TgZ(15,"button",9),e.NdJ("click",function(){return n.showGrid=!0}),e._UZ(16,"i",11),e.qZA()(),e.TgZ(17,"div",12)(18,"div",13),e._UZ(19,"input",14),e.TgZ(20,"mat-icon",15),e._uU(21,"search"),e.qZA()()(),e.TgZ(22,"div",12)(23,"div",13)(24,"mat-select",16),e.NdJ("ngModelChange",function(a){return n.sortBy=a}),e.TgZ(25,"mat-option",17),e._uU(26," Sort By "),e.qZA(),e.TgZ(27,"mat-option",18),e._uU(28," Date "),e.qZA(),e.TgZ(29,"mat-option",19),e._uU(30," Price "),e.qZA()()()(),e.TgZ(31,"div",20)(32,"button",21)(33,"span"),e._uU(34,"+"),e.qZA(),e._uU(35," Add member "),e.qZA()()()()(),e.YNc(36,de,277,6,"div",22),e.YNc(37,Ze,5,13,"div",23),e.qZA(),e._UZ(38,"router-outlet")),2&t&&(e.xp6(13),e.ekj("active",!n.showGrid),e.xp6(2),e.ekj("active",n.showGrid),e.xp6(9),e.Q6J("ngModel",n.sortBy),e.xp6(12),e.Q6J("ngIf",n.showGrid),e.xp6(1),e.Q6J("ngIf",!n.showGrid))},dependencies:[Z.sg,Z.O5,D.lW,k.VK,k.OP,k.p6,V.Hw,y.a8,y.dk,y.dn,J.R9,Q.Nt,le.gD,ue.ey,f.JJ,f.On,H.LS,I.nE,I.UC,I.tk,I.vq,b.lC,H._s]}),i})();function Te(i,o){if(1&i&&(e.TgZ(0,"mat-card",5)(1,"div",6),e._UZ(2,"img",7),e.qZA(),e.TgZ(3,"div",8)(4,"h3"),e._uU(5),e.qZA(),e.TgZ(6,"p"),e._uU(7),e.qZA()(),e.TgZ(8,"div",9),e._uU(9,"1 day ago"),e.qZA(),e.TgZ(10,"button",1),e._UZ(11,"i",10),e.qZA()()),2&i){const t=o.$implicit;e.xp6(5),e.Oqu(null==t?null:t.title),e.xp6(2),e.Oqu(null==t?null:t.description)}}function Ae(i,o){if(1&i&&(e.TgZ(0,"div",3),e.YNc(1,Te,12,2,"mat-card",4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.notifications)}}let be=(()=>{class i{constructor(t,n){this.moduleService=t,this.activatedRoute=n,this.notifications=[],this.moduleService.mainTitle.next("Notification")}ngOnInit(){this.notifications=this.activatedRoute.snapshot.data.notifications.data}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(N.C),e.Y36(b.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-notification"]],decls:4,vars:1,consts:[[1,"container-fluid","d-flex"],[1,"common-btn","btn-text"],["class","notification-wrapper",4,"ngIf"],[1,"notification-wrapper"],["class","w-100 not-read notify-card d-flex",4,"ngFor","ngForOf"],[1,"w-100","not-read","notify-card","d-flex"],[1,"avatar-wrapper"],["src","../../../../../assets/images/user-pic.png","alt",""],[1,"notification-content"],[1,"notfication-time"],[1,"fa-solid","fa-xmark"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e._uU(2,"Mark all as read"),e.qZA(),e.YNc(3,Ae,2,1,"div",2),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",n.notifications&&n.notifications.length>0))},dependencies:[Z.sg,Z.O5,y.a8]}),i})();var xe=l(5226),O=l.n(xe),Y=l(2819),Ue=l(8069);let qe=(()=>{class i extends G.v{constructor(t,n,s){super(t,n,s),this._snackBar=t,this.http=n,this.storage=s,this.updateProfilePic=a=>{const u=C.G.uri+"/user/profile/picture",d={headers:new _.WM({Authorization:this.getAuthToken()})};return this.http.post(u,a,d).pipe((0,x.U)(c=>c),(0,U.K)(this.handleError))},this.updateProfile=a=>{const u=C.G.uri+"/user/profile/update",d={headers:new _.WM({"Content-Type":"application/json",Authorization:this.getAuthToken()})},c=JSON.stringify(a);return this.http.post(u,c,d).pipe((0,x.U)(p=>p),(0,U.K)(this.handleError))},this.handleError=a=>{const u=a.error;switch(a.status){case 401:default:this._snackBar.open(u.message,void 0,{duration:5e3});break;case 400:case 422:const g=u.data;for(let d in g)this._snackBar.open(g[d].message,void 0,{duration:5e3})}}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(S.ux),e.LFG(_.eN),e.LFG(q.n2))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var L=l(6885),W=l(1481);const ke=["editProfileImagesDialog"];function ye(i,o){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-field",7),e.qZA()),2&i){const t=o.$implicit;e.Gre("col-lg-",t.value.col,""),e.xp6(1),e.Q6J("field",t.value)("key",t.key)}}function Fe(i,o){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-field",7),e.qZA()),2&i){const t=o.$implicit;e.Gre("col-lg-",t.value.col,""),e.xp6(1),e.Q6J("field",t.value)("key",t.key)}}let we=(()=>{class i{constructor(t,n,s,a,u,g,d){this.router=t,this.moduleService=n,this.fieldService=s,this.localStorageService=a,this.fb=u,this.dialog=g,this.profileService=d,this.form=Y.c.profileForm,this.changePasswordForm=Y.c.changePasswordForm,this.profileForm=this.fb.group({firstName:["",f.kI.required],lastName:[null,f.kI.required],gender:[null,f.kI.required],dob:[null,f.kI.required],mobileNo:[null,f.kI.required],email:[null,[]]}),this.profileImages={picture:{url:null,evt:null,src:null,blob:null},pictureBackground:{url:null,evt:null,src:null,blob:null}},this.setProfileImage=()=>{this.user=this.localStorageService.retrieve("user"),this.user&&this.user.profilePicture&&(this.profileImg=C.G.uri+"/"+this.user.profilePicture),this.user&&this.user.profilePictureBackground&&(this.profileBg=C.G.uri+"/"+this.user.profilePictureBackground)},this.redirect=c=>{const p={state:{refresh:(new Date).getTime()}};this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate([c.link],p))},this.editProfile=()=>{this.dialog.open(this.editProfileImagesTemplate,{width:"800px",disableClose:!0}).afterClosed().subscribe(p=>{this.clearFile("all")})},this.onFileSelected=(c,p)=>{c&&c.target&&c.target.files&&c.target.files.length>0?"profile"===p?this.profileImages.picture.evt=c:"profileBg"===p&&(this.profileImages.pictureBackground.evt=c):this.clearFile(p)},this.clearFile=c=>{"profile"===c?(this.selectedFile=null,this.profileImages.picture.evt=null,this.profileImages.picture.blob=null):"profileBg"===c?(this.selectedFileBg=null,this.profileImages.pictureBackground.evt=null,this.profileImages.pictureBackground.blob=null):"all"===c&&(this.selectedFile=null,this.selectedFileBg=null,this.profileImages.picture.evt=null,this.profileImages.picture.blob=null,this.profileImages.pictureBackground.evt=null,this.profileImages.pictureBackground.blob=null)},this.upload=()=>{if(null===this.selectedFile&&null===this.selectedFileBg)return!1;const c=new FormData;this.selectedFile&&c.append("profilePicture",this.selectedFile),this.selectedFileBg&&c.append("profilePictureBackground",this.selectedFileBg);const p={next:h=>{let A="";this.selectedFile&&(A="Successfully uploaded profile photo."),this.selectedFileBg&&(A="Successfully uploaded profile background photo."),O().fire({title:A,icon:"success",confirmButtonColor:"#002b5c",confirmButtonText:"Close"}).then(r=>{if(r.isConfirmed&&h&&h.status){let m=this.user;m=Object.assign(Object.assign({},m),h.data),this.localStorageService.store("user",m),this.user=m,this.setProfileImage(),this.dialog.closeAll(),this.clearFile("all")}})},error:h=>{h&&h.error&&h.error.message&&O().fire("Warning!",h.error.message,"error")},complete:()=>{console.log("Observer got a complete notification")}};this.profileService.updateProfilePic(c).subscribe(p)},this.update=()=>{if(this.profileForm.invalid)return void console.log(this.profileForm);const p=this.fieldService.json(this.profileForm.controls),h={next:A=>{O().fire({title:"Profile data updated successfully.",icon:"success",confirmButtonColor:"#002b5c",confirmButtonText:"Close"}).then(r=>{var m;if(r.isConfirmed&&A&&A.status){let T=this.user;T=Object.assign(Object.assign({},T),A.data);const F=T.firstName+" "+T.lastName;T.fullName=F;const Qe=null===(m=F.match(/\b(\w)/g))||void 0===m?void 0:m.join("");T.shortName=Qe,this.localStorageService.store("user",T),this.user=T}})}};this.profileService.updateProfile(p).subscribe(h)},this.imageChangedEvent="",this.croppedImage="",this.b64toBlob=(c,p)=>{const h=atob(c.split(",")[1]),A=new ArrayBuffer(h.length),r=new Uint8Array(A);for(let m=0;m<h.length;m++)r[m]=h.charCodeAt(m);return new Blob([A],{type:p})},this.moduleService.mainTitle.next("Profile")}ngOnInit(){const t=this.localStorageService.retrieve("user");this.user=t,this.profileForm.controls.firstName.setValue(t.firstName),this.profileForm.controls.lastName.setValue(t.lastName),this.profileForm.controls.gender.setValue(t.gender),this.profileForm.controls.dob.setValue(t.dob),this.profileForm.controls.mobileNo.setValue(t.mobileNo),this.profileForm.controls.email.setValue(t.email),this.setProfileImage()}fileChangeEvent(t){this.imageChangedEvent=t}imageCropped(t,n,s){switch(n.src=t.base64,n.blob=this.b64toBlob(t.base64,"image/png"),s){case"picture":this.selectedFile=n.blob;break;case"pictureBackground":this.selectedFileBg=n.blob}}imageLoaded(){}cropperReady(){}loadImageFailed(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b.F0),e.Y36(N.C),e.Y36(Ue.D),e.Y36(q.n2),e.Y36(f.qu),e.Y36(w.uw),e.Y36(qe))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-profile"]],viewQuery:function(t,n){if(1&t&&e.Gf(ke,7),2&t){let s;e.iGM(s=e.CRH())&&(n.editProfileImagesTemplate=s.first)}},decls:17,vars:6,consts:[[1,"row"],[1,"col-md-3"],[1,"card","shadow","mb-4"],[1,"card-header"],[1,"card-body"],[3,"class",4,"ngFor","ngForOf"],[1,"col-md-6"],[3,"field","key"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4," Profile Details "),e.qZA(),e.TgZ(5,"div",4)(6,"div",0),e.YNc(7,ye,2,5,"div",5),e.ALo(8,"keys"),e.qZA()()()(),e.TgZ(9,"div",6)(10,"div",2)(11,"div",3),e._uU(12," Profile Details "),e.qZA(),e.TgZ(13,"div",4)(14,"div",0),e.YNc(15,Fe,2,5,"div",5),e.ALo(16,"keys"),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngForOf",e.lcZ(8,2,n.form)),e.xp6(8),e.Q6J("ngForOf",e.lcZ(16,4,n.form)))},dependencies:[Z.sg,L.C,W.V]}),i})(),Ne=(()=>{class i{constructor(t){this.conversationService=t}resolve(t,n){return this.conversationService.getConversation()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(M))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Se=(()=>{class i{constructor(t){this.conversationService=t}resolve(t,n){return this.conversationService.getConversationHistory(t.params.id)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(M))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Me=function(i,o){return{"receive-msg":i,"send-msg":o}};function Ie(i,o){if(1&i&&(e.TgZ(0,"div",12)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"div",13)(4,"span",14),e._uU(5,"9.30 am"),e.qZA(),e.TgZ(6,"span",15),e._UZ(7,"i",16),e.qZA()()()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.WLB(2,Me,t.userId!==n.user._id,t.userId===n.user._id)),e.xp6(2),e.Oqu(t.text)}}let Je=(()=>{class i{constructor(t,n,s,a,u,g){this.moduleService=t,this.activatedRoute=n,this.route=s,this.localStorageService=a,this.socketService=u,this.conversationService=g,this.user=null,this.params=null,this.message="",this.currentConversationData=null,this.conversationHistory=[],this.send=()=>{this.socketService.postChatMessageSend({eventName:"chat.message.receive",eventTo:this.params.id,conversationType:"individual",userId:this.user._id,conversationId:this.params.id,data:{type:"text",text:v.cloneDeep(this.message)}}),this.message=""},this.conversationHistory=this.activatedRoute.snapshot.data.conversationHistory.data,this.currentConversationData=this.localStorageService.retrieve("currentConversationData"),this.params=this.activatedRoute.snapshot.params,this.socketService.receive().subscribe(d=>{this.params&&this.params.id&&this.params.id===d.conversationId&&this.conversationHistory.push(d)})}ngOnInit(){this.user=this.localStorageService.retrieve("user")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(N.C),e.Y36(b.gz),e.Y36(b.F0),e.Y36(q.n2),e.Y36(P.$),e.Y36(M))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-chat-window"]],decls:13,vars:3,consts:[[1,"chart-wrapper","width-100"],[1,"chat-window","padding-zero"],[1,"list-header","d-flex","align-items"],[1,"user-img","d-flex","align-items","align-center"],[1,"user-details"],[1,"profile__initals","ani"],[1,"chat-messages","d-flex"],["class"," chat-popup",3,"ngClass",4,"ngFor","ngForOf"],[1,"send-input","d-flex"],["cols","3","placeholder","Type a message",3,"ngModel","ngModelChange"],[1,"common-btn","btn-text"],[1,"fa-regular","fa-paper-plane",3,"click"],[1,"chat-popup",3,"ngClass"],[1,"d-flex","time-wrapper","w-100"],[1,"time"],[1,"tick"],[1,"fa-solid","fa-check-double"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"mat-card",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"p",5),e._uU(6),e.qZA()()(),e.TgZ(7,"div",6),e.YNc(8,Ie,8,5,"div",7),e.qZA(),e.TgZ(9,"div",8)(10,"textarea",9),e.NdJ("ngModelChange",function(a){return n.message=a}),e.qZA(),e.TgZ(11,"button",10)(12,"i",11),e.NdJ("click",function(){return n.send()}),e.qZA()()()()()),2&t&&(e.xp6(6),e.Oqu(n.currentConversationData.userFullName),e.xp6(2),e.Q6J("ngForOf",n.conversationHistory),e.xp6(2),e.Q6J("ngModel",n.message))},dependencies:[Z.mk,Z.sg,y.a8,f.Fj,f.JJ,f.On,R.oO]}),i})(),Oe=(()=>{class i{constructor(t,n,s){this._snackBar=t,this.http=n,this.storage=s,this.getAuthToken=()=>`JWT ${this.storage.retrieve("tokens").accessToken}`,this.getNotifications=()=>{const a=C.G.uri+"/notification/list",g={headers:new _.WM({"Content-Type":"application/json",Authorization:this.getAuthToken()})};return this.http.get(a,g).pipe((0,x.U)(d=>d),(0,U.K)(this.handleError))},this.handleError=a=>{const u=a.error;switch(a.status){case 401:default:this._snackBar.open(u.message,void 0,{duration:5e3});break;case 400:case 422:const g=u.data;for(let d in g)this._snackBar.open(g[d].message,void 0,{duration:5e3})}}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(S.ux),e.LFG(_.eN),e.LFG(q.n2))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ye=(()=>{class i{constructor(t){this.notificationService=t}resolve(t,n){return this.notificationService.getNotifications()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Oe))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Be(i,o){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-field",6),e.qZA()),2&i){const t=o.$implicit;e.Gre("col-lg-",t.value.col,""),e.xp6(1),e.Q6J("field",t.value)("key",t.key)}}const Pe=[{path:"profile",component:we},{path:"categories",component:(()=>{class i{constructor(){this.form=Y.c.profileForm}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-categories"]],decls:9,vars:3,consts:[[1,"row"],[1,"col-md-3"],[1,"card","shadow","mb-4"],[1,"card-header"],[1,"card-body"],[3,"class",4,"ngFor","ngForOf"],[3,"field","key"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4," Profile Details "),e.qZA(),e.TgZ(5,"div",4)(6,"div",0),e.YNc(7,Be,2,5,"div",5),e.ALo(8,"keys"),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngForOf",e.lcZ(8,1,n.form)))},dependencies:[Z.sg,L.C,W.V]}),i})()},{path:"chat",component:ce,resolve:{conversations:Ne},children:[{path:":id/conversation",resolve:{conversationHistory:Se},component:Je}]},{path:"notification",resolve:{notifications:Ye},component:be},{path:"family",component:Ce},{path:"setting",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-setting"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"setting works!"),e.qZA())}}),i})()}];let Ge=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[b.Bz.forChild(Pe),b.Bz]}),i})();var De=l(6604);let Ve=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[Z.ez,De.m,Ge]}),i})()}}]);