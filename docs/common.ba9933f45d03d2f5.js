"use strict";(self.webpackChunkngweb=self.webpackChunkngweb||[]).push([[592],{6347:(A,l,n)=>{n.d(l,{e:()=>M});var i=n(520),h=n(4850),c=n(7221),p=n(8210),_=n(5e3),E=n(7261),g=n(5374),O=n(2290);let M=(()=>{class u{constructor(d,v,P,D){this._snackBar=d,this.http=v,this.storage=P,this.toastr=D,this.generateOTP=t=>{const s=p.G.uri+"/auth/otp/generate",e={headers:new i.WM({"Content-Type":"application/json"})},r=JSON.stringify(t);return this.http.post(s,r,e).pipe((0,h.U)(a=>a),(0,c.K)(this.handleError))},this.verifyOTP=t=>{const s=p.G.uri+"/auth/otp/verify",e={headers:new i.WM({"Content-Type":"application/json"})},r=JSON.stringify(t);return this.http.post(s,r,e).pipe((0,h.U)(a=>a),(0,c.K)(this.handleError))},this.register=t=>{const s=p.G.uri+"/auth/register",e={headers:new i.WM({"Content-Type":"application/json"})},r=JSON.stringify(t);return this.http.post(s,r,e).pipe((0,h.U)(a=>a),(0,c.K)(this.handleError))},this.login=t=>{const s=p.G.uri+"/auth/login",e={headers:new i.WM({"api-build-version":"1.1.96","Content-Type":"application/json"})},r=JSON.stringify(t);return this.http.post(s,r,e).pipe((0,h.U)(a=>a),(0,c.K)(this.handleError))},this.check=()=>{const t=p.G.uri+"/auth/check",o={headers:new i.WM({"Content-Type":"application/json",Authorization:this.getAuthToken()})};return this.http.get(t,o).pipe((0,h.U)(e=>e),(0,c.K)(this.handleError))},this.saveDevice=t=>{const s=p.G.uri+"/device/create",e={headers:new i.WM({"Content-Type":"application/json",Authorization:this.getAuthToken()})},r=JSON.stringify(t);return this.http.post(s,r,e).pipe((0,h.U)(a=>a),(0,c.K)(this.handleError))},this.getAuthToken=()=>`JWT ${this.storage.retrieve("tokens").accessToken}`,this.handleError=t=>{const s=t.error;switch(t.status){case 401:default:this.toastr.error(s.message);break;case 400:case 422:const o=s.data;for(let e in o)this.toastr.error(o[e].message)}}}}return u.\u0275fac=function(d){return new(d||u)(_.LFG(E.ux),_.LFG(i.eN),_.LFG(g.n2),_.LFG(O._W))},u.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);